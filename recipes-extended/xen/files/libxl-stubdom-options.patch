Index: xen-4.6.1/tools/libxl/libxl_types.idl
===================================================================
--- xen-4.6.1.orig/tools/libxl/libxl_types.idl
+++ xen-4.6.1/tools/libxl/libxl_types.idl
@@ -462,6 +462,11 @@ libxl_domain_build_info = Struct("domain
     #  parameters for all type of scheduler
     ("sched_params",     libxl_domain_sched_params),
 
+    #Memory size for stubdom
+    ("stubdom_memory",  MemKB),
+    #Kernel args for stubdom
+    ("stubdom_cmdline", string),
+
     ("ioports",          Array(libxl_ioport_range, "num_ioports")),
     ("irqs",             Array(uint32, "num_irqs")),
     ("iomem",            Array(libxl_iomem_range, "num_iomem")),
Index: xen-4.6.1/tools/libxl/libxl_dm.c
===================================================================
--- xen-4.6.1.orig/tools/libxl/libxl_dm.c
+++ xen-4.6.1/tools/libxl/libxl_dm.c
@@ -1433,6 +1433,7 @@ void libxl__spawn_stub_dm(libxl__egc *eg
         abort();
     }
     dm_config->b_info.max_memkb += guest_config->b_info.video_memkb;
+    dm_config->b_info.max_memkb += guest_config->b_info.stubdom_memory;
     dm_config->b_info.target_memkb = dm_config->b_info.max_memkb;
 
     dm_config->b_info.u.pv.features = "";
@@ -1444,6 +1445,7 @@ void libxl__spawn_stub_dm(libxl__egc *eg
     dm_config->b_info.extra = guest_config->b_info.extra;
     dm_config->b_info.extra_pv = guest_config->b_info.extra_pv;
     dm_config->b_info.extra_hvm = guest_config->b_info.extra_hvm;
+    dm_config->b_info.stubdom_cmdline = guest_config->b_info.stubdom_cmdline;
 
     dm_config->disks = guest_config->disks;
     dm_config->num_disks = guest_config->num_disks;
@@ -1499,6 +1501,7 @@ void libxl__spawn_stub_dm(libxl__egc *eg
      */
     if (guest_config->b_info.stubdomain_version == LIBXL_STUBDOMAIN_VERSION_LINUX) {
         int dmargs_size = 0;
+        char delim[] = "obvious-delimiter-pattern";
         char *dmargs;
         char **arg;
 
@@ -1507,10 +1510,15 @@ void libxl__spawn_stub_dm(libxl__egc *eg
         arg++;
         for (; *arg; arg++)
             dmargs_size = dmargs_size + strlen(*arg) + 1;
+        dmargs_size = dmargs_size + strlen(dm_config->b_info.stubdom_cmdline) + strlen(delim) + 2;
         dmargs = (char *) libxl__malloc(gc, dmargs_size);
 
         /* Use strcat to concatenate everything */
         dmargs[0] = '\0';
+        strcat(dmargs, dm_config->b_info.stubdom_cmdline);
+        strcat(dmargs, " ");
+        strcat(dmargs, delim);
+        strcat(dmargs, " ");
         arg = args;
         arg++;
         if (arg) {
Index: xen-4.6.1/tools/libxl/xl_cmdimpl.c
===================================================================
--- xen-4.6.1.orig/tools/libxl/xl_cmdimpl.c
+++ xen-4.6.1/tools/libxl/xl_cmdimpl.c
@@ -2161,6 +2161,17 @@ skip_nic:
     }
 
 
+    if (!xlu_cfg_get_long (config, "stubdom_memory", &l, 0))
+        b_info->stubdom_memory = l;
+
+    //If stubdom_cmdline is provided, use it, otherwise, always set default to empty string
+    if(!xlu_cfg_get_string(config, "stubdom_cmdline", &buf, 0)) {
+        xlu_cfg_replace_string(config, "stubdom_cmdline", &b_info->stubdom_cmdline, 0);
+    } else {
+        b_info->stubdom_cmdline = (char *) malloc(sizeof(char)*1);
+        b_info->stubdom_cmdline[0] = '\0';
+    }
+
     xlu_cfg_replace_string (config, "device_model_override",
                             &b_info->device_model, 0);
     if (!xlu_cfg_get_string (config, "device_model_version", &buf, 0)) {
